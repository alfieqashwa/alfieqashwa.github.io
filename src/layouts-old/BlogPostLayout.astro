---
import BaseLayout from "./BaseLayout.astro";
import { formatDate } from "../utils/formatDate";

const { frontmatter } = Astro.props;
const { title, description, pubDate, tags, author } = frontmatter;
---

<BaseLayout pageTitle={title}>
  <article class="mx-auto max-w-4xl px-4">
    <!-- Header -->
    <div class="mb-8 sm:mb-12">
      <!-- Back to Blog -->
      <div class="mb-6">
        <a 
          href="/blog" 
          class="inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5m7-7l-7 7 7 7"/>
          </svg>
          Back to Blog
        </a>
      </div>
      
      <!-- Article Header -->
      <div class="space-y-4">
        <!-- Date & Reading Time -->
        <div class="flex items-center gap-4 text-sm text-muted-foreground">
          {pubDate && (
            <time datetime={pubDate.toISOString()}>
              {formatDate(pubDate)}
            </time>
          )}
          <span>â€¢</span>
          <span>5 min read</span>
        </div>
        
        <!-- Title -->
        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold leading-tight">
          {title}
        </h1>
        
        <!-- Description -->
        {description && (
          <p class="text-lg sm:text-xl text-muted-foreground leading-relaxed">
            {description}
          </p>
        )}
        
        <!-- Author & Tags -->
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-4 border-t border-border">
          {author && (
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center">
                <span class="text-sm font-semibold text-primary">
                  {author.charAt(0).toUpperCase()}
                </span>
              </div>
              <div>
                <p class="text-sm font-medium">{author}</p>
                <p class="text-xs text-muted-foreground">Author</p>
              </div>
            </div>
          )}
          
          {tags && tags.length > 0 && (
            <div class="flex flex-wrap gap-2">
              {tags.map((tag: string) => (
                <a 
                  href={`/tags/${tag}`}
                  class="inline-flex items-center px-3 py-1 text-xs bg-primary/10 text-primary rounded-full hover:bg-primary/20 transition-colors"
                >
                  #{tag}
                </a>
              ))}
            </div>
          )}
        </div>
      </div>
    </div>
    
    <!-- Content -->
    <div class="prose prose-neutral dark:prose-invert max-w-none">
      <slot />
    </div>
    
    <!-- Footer -->
    <div class="mt-12 pt-8 border-t border-border">
      <div class="flex items-center justify-between">
        <div class="text-sm text-muted-foreground">
          <p>Thank you for reading!</p>
        </div>
        
        <!-- Share buttons could go here -->
        <div class="flex items-center gap-2">
          <a 
            href="/blog" 
            class="inline-flex items-center gap-2 px-4 py-2 text-sm bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors"
          >
            More Posts
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M13 5h6v6m0-6L5 19"/>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </article>
</BaseLayout>

<style>
  .prose h2 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-top: 2rem;
    margin-bottom: 1rem;
    line-height: 1.3;
  }
  
  .prose h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    line-height: 1.4;
  }
  
  .prose p {
    line-height: 1.7;
    margin-bottom: 1rem;
  }
  
  .prose a {
    color: hsl(var(--primary));
    text-decoration: underline;
  }
  
  .prose a:hover {
    text-decoration: none;
  }
  
  .prose code {
    background-color: hsl(var(--muted));
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
    font-size: 0.875rem;
  }
  
  .prose pre {
    background-color: hsl(var(--muted));
    border: 1px solid hsl(var(--border));
    border-radius: 0.5rem;
    padding: 1rem;
    overflow-x: auto;
    margin: 1rem 0;
  }
  
  .prose pre code {
    background-color: transparent;
    padding: 0;
  }
  
  .prose blockquote {
    border-left: 4px solid hsl(var(--primary) / 0.3);
    padding-left: 1rem;
    font-style: italic;
    color: hsl(var(--muted-foreground));
    margin: 1rem 0;
  }
  
  .prose ul,
  .prose ol {
    margin-bottom: 1rem;
  }
  
  .prose li {
    line-height: 1.7;
    margin-bottom: 0.5rem;
  }
</style>
